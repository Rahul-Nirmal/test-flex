define(["jquery","utils","jQueryBridget","imagesloaded","masonry"],function(n,t){function k(){for(var i=[],n,r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),t=0;t<r.length;t++)n=r[t].split("="),i.push(n[0]),i[n[0]]=n[1];return i}function l(){n(".tabcontent").each(function(){var i=n(this).find(".column"),t=0;n(i).each(function(){n(this).height()>t&&(t=n(this).height())});t>0&&n(i).height(t)})}function a(){var r=n("#Tabset1").offset().top-100,i=n(".countrytabblock").find(".custom-tab .active"),t=i.parent().parent();n(this).scrollTop()>=r&&t.css("position")!=="fixed"?t.siblings().hide("fast",function(){t.css({position:"fixed",top:"0px",left:"0px","z-index":"100"});i.css({cursor:"initial"});t.prepend(c)}):n(this).scrollTop()<r&&t.css("position")!=="relative"&&(top=0,i.css({cursor:"pointer"}),t.css({position:"relative"}),n(".custom-tab-carrot").remove(),t.siblings().each(function(){n(this).css({position:"relative",display:"block",top:"initial",left:"initial"})}))}function d(i){var o,s,r,f,e;if(typeof i!="undefined"&&typeof i!=null&&(o=g("audtype"),o==="professional"?t.setCookie(u,"consumer",30):o==="consumer"&&t.setCookie(u,"professional",30),i.AudienceActivated==="True")){if(s=t.getCookie(u),r=n("#"+p),s&&s===i.AudienceType)return;r!=null&&(f=n('[data-option="option1"]',r),e=n('[data-option="option2"]',r),f!=null&&e!=null&&(i.AudienceType==="consumer"?(f.attr("href",i.AlternateContentPage),e.attr("href",window.location.href)):i.AudienceType==="professional"&&(f.attr("href",window.location.href),e.attr("href",i.AlternateContentPage)),f.click(function(){t.setCookie(u,"professional",30);r.modal()}),e.click(function(){t.setCookie(u,"consumer",30);r.modal()})),r.modal({backdrop:"static",keyboard:!1}))}}function g(n){for(var r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i,t=0;t<r.length;t++)if(i=r[t].split("="),i[0]==n)return i[1]}function nt(){var i=n("#"+s).val(),r,u,t;i!=""?(r={searchTerm:i},u=o,t=n.ajax({url:u,data:r,type:"POST"}),t.done(function(t){console.log("Country Select Success");n("#"+h).html(t)}),t.fail(function(n){console.log(n.responseText);alert(n.responseText)})):n("#"+h).html(null)}function tt(){var t=document.getElementById(e);t!=null&&n("a[href*='//']").click(function(t){var u,f;t.preventDefault();var s=this,o=n(s).attr("href"),i=n(s).attr("target"),h=n.trim(o).split("/"),c=h[2];if(n(s).hasClass("modalbuttons")||typeof r!="undefined"&&n.inArray(c,r)>-1){i!=undefined&&i!=null?window.open(o,i):window.location=o;return}u=n("#"+e);u!=null&&(f=n('[data-confirm="true"]',u),f!=null&&(f.attr("href",o),i!=undefined&&i!=null&&(f.attr("target",i),n.inArray(new String(i).toLowerCase(),y)>-1&&f.click(function(){u.modal("hide")}))),u.modal())})}var r=[],e="externalInterstitial",y=["_blank"],o,s="find-country",h="countrySelectResults",u="SelfCertAudience",p="selfCertification",i=!1,c="<div class='custom-tab-carrot'><\/div>",w=function(r){function u(){}var f=0;n(window).scroll(function(){i&&n(window).width()<769&&a();n(".tab-nav").length&&u()});n(document).ready(function(){var h,y,v,b,p,w,k,e,g,o,ut,it,rt;n(".tab-nav").length&&(f=n(".tab-nav").offset().top||0,u());n(".countrynavtabcontainerblock .nav-toggle").click(function(){var t=n(".flex-item.tab-nav-option.active");t.parent().siblings().toggle()});n(".refresh-card-header").click(function(t){n(t.currentTarget).closest("div.refresh-card").toggleClass("open");n(t.currentTarget).find("span").toggleClass("glyphicon-plus glyphicon-minus");n(t.currentTarget).next().toggle()});n("#btnCloseVideomodalpopup").click(function(){n("#videomodalpopup").find("iframe").attr("src","");n("#videomodalpopup").modal("hide")});h=0;n(".handle-video-click").click(function(t){t.preventDefault();var i=n(this).data(),r="";if(h=0,i.vimeovideoid)r="https://player.vimeo.com/video/"+i.vimeovideoid;else if(i.youtubevideoid)r="https://www.youtube.com/embed/"+i.youtubevideoid;else if(r=i.modulemodalwindowurl,h=1,i.frame.toLowerCase()=="false")return!1;n("#videomodalpopup").find("iframe").attr("src",r);n("#videomodalpopup").modal({backdrop:"static",keyboard:!1});y(0)});y=function(){var u,t;if(h==1){var r=document.documentElement.clientWidth,i=80*r/100,t=n("#videomodalpopup").find("iframe");t&&(t.css({width:i+"px",height:"715px"}),n("#btnCloseVideomodalpopup").css({top:"calc(50% - 338px)"}),u=i+(r-i)/2-8,n("#btnCloseVideomodalpopup").css({left:u+"px"}))}else t=n("#videomodalpopup").find("iframe"),t&&(t.css({width:"",height:""}),n("#btnCloseVideomodalpopup").css({left:""}))};window.addEventListener("resize",y);v=n(".refresh-asset-grid-container");v.length&&(b=v.attr("class").split(" ").pop(),v.parent().addClass(b));n(".dropdown-toggle").click(function(){n(this).closest("li").hasClass("flyout")&&(window.location.href=n(this).attr("href"))});n(".mobile-new-nav > li.heading > a").click(function(t){t.preventDefault();t.stopPropagation();var i=n(this).next("span"),r=n(this).closest("li"),u=r.find("ul.mobile-child-nav");u.length&&(i.hasClass("glyphicon-triangle-bottom")?(i.removeClass("glyphicon-triangle-bottom"),i.addClass("glyphicon-triangle-top")):(i.removeClass("glyphicon-triangle-top"),i.addClass("glyphicon-triangle-bottom")),r.siblings().find("ul.mobile-child-nav").hide(),r.siblings().find("span").removeClass("glyphicon-triangle-top").addClass("glyphicon-triangle-bottom"),u.toggle())});p=n("#DockProductTabs").val();typeof p!="undefined"&&p==="True"&&(i=!0);n(".videolink").click(function(){var r=n(this).data("autoplay"),t=n(this).data("target").replace("#",""),i="iframeYoutube"+t,u=n("#"+i).attr("src"),f=window.location.hash;window.history.pushState("","","?VideoID="+t+f);n("#"+t).on("shown.bs.modal",function(){r===1&&n("#"+i).attr("src",u+"?autoplay=1")})});n(".search-icon").click(function(t){t.stopPropagation();n(".search-desktop-wrap").fadeToggle("fast",function(){})});d(r);w=n(".grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0,resize:!0});w.imagesLoaded().progress(function(){w.masonry("layout")});location.hash!=null&&location.hash!=""&&n("div").hasClass("panel-group")&&(n(".collapse").removeClass("in"),n(location.hash+".collapse").collapse("show"),k=n(location.hash).parentsUntil("panel-heading"),n("html, body").animate({scrollTop:n(k).offset().top},1e3));n(".anim-scroll a[href^='#']").on("click",function(t){t.preventDefault();var i=this.hash;n("html, body").animate({scrollTop:n(i).offset().top},1e3,function(){window.location.hash=i})});n(".hide-panel").click(function(){n(".content-block.collapse.in").removeClass("in")});n(".hide-lang-panel").click(function(t){var i=n(t.target).text();n("#language").text(i);n(".content-block.collapse.in").removeClass("in")});e=59;n(document).on("click",".custom-tab-carrot",function(){e=59;n(this).parent().siblings().each(function(){n(this).css("position")==="fixed"?n(this).css({position:"relative",display:"none",top:0}):(n(this).css({position:"fixed",top:e,left:"0px","z-index":"101",display:"block"}),e+=57)})});n("li.flyout").hover(function(){n(this).find(".dropdown-menu.desktop-flyout").first().fadeIn("fast")},function(){n(this).find(".dropdown-menu.desktop-flyout").first().fadeOut("fast")});n(".custom-tab a").click(function(){if(i&&n(window).width()<769){n(".custom-tab-carrot").remove();var t=n("#Tabset1").offset().top-100;n(window).scrollTop()>=t&&(e=59,n(this).parent().parent().siblings().each(function(){n(this).find("a").css({cursor:"pointer"});n(this).css({position:"relative",top:e,left:"0px","z-index":"101",display:"none"});e+=57}),n(this).parent().parent().prepend(c),n(this).css({cursor:"initial"}),n(this).parent().parent().css({position:"fixed",top:"0",left:"0px","z-index":"101",display:"block"}))}tabsSet=n(this).closest(".custom-tabs").attr("id");n("#"+tabsSet+"  a").removeClass("active");console.log("#"+tabsSet+"  a");n("iframe[data-isvideo]").each(function(){n(this)[0].contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")});n(this).addClass(" active");activeTab=n(this).attr("rel");history.pushState?history.pushState(null,null,"#"+activeTab):window.location.hash=activeTab;n("#"+tabsSet+" .tabcontent").css("display","none");n("#"+tabsSet+" .tabcontent."+activeTab).css("display","block");i&&n(window).width()<769&&n("html, body").animate({scrollTop:n("#Tabset1").offset().top},1e3);l()});n(".custom-tabs").each(function(t,i){customId=n(i).attr("id");n("#"+customId+" .tabcontent:first").css("display","block");n("#"+customId+" .nav-tabs a:first").addClass(" active")});g=document.location.toString();o=g.split("#")[1];typeof o!="undefined"&&(ut=this.value,o!==""&&n("div").hasClass("custom-tabs")&&(n(".nav-tabs a").removeClass(" active"),n("a[rel="+o+"]").addClass("active"),n(".tabcontent").css("display","none"),n(".tabcontent."+o).css("display","block"),console.log("Scrolling to the custom-tabs content..."),n("html, body").animate({scrollTop:n(".custom-tabs-block").offset().top-50},"slow")));n("a.clickTab").click(function(){var t=n(this).attr("rel");n(".nav-tabs a").removeClass("active");n("a[rel="+t+"]").addClass("active");n(".tabcontent").css("display","none");n(".tabcontent."+t).css("display","block");n("html, body").animate({scrollTop:n(".custom-tabs-block").offset().top},"slow")});n("body").append(n("div.modal"));n(window).width()<769&&n(".switch-desktop-mobile").contents().appendTo(".mobile-main-content");n(window).resize(function(){if(n(".switch-desktop-mobile").length&&n(".mobile-main-content").length&&n(".countrytabblock").length){if(n(window).width()<769)n(".switch-desktop-mobile").contents().appendTo(".mobile-main-content"),i&&a();else if(n(".mobile-main-content").contents().appendTo(".switch-desktop-mobile"),i){var t=n(".countrytabblock").find(".custom-tab .active"),r=t.parent().parent();r.css({position:"relative",display:"block",top:"initial",left:"initial"});t.parent().find("a").css({cursor:"pointer"});n(".custom-tab-carrot").remove();r.siblings().each(function(){n(this).css({position:"relative",display:"block",top:"initial",left:"initial"})})}}else n(".tab-nav").length&&u()});n("#"+s).keyup(function(n){nt(n)});l();tt();it=document.getElementsByClassName("countrycookiedisclaimerblock");it.length>0&&(console.log("Site with cookies"),rt=t.getCookie("username"),document.getElementsByClassName("cookie-warning")[0].style.display=rt=="site-user"?"none":"block",n("#cookieDisclaimer a").click(function(n){n.preventDefault();t.setCookie("username","site-user",30);document.getElementsByClassName("cookie-warning")[0].style.display="none"}));n(".sw-modal-close").click(function(){var t=n(this).closest(".modal").attr("id");n("#"+t).modal("hide")})});console.log("Country module initialized.");n(".video-popup").on("hidden.bs.modal",function(){n(".video-popup iframe").attr("src",n(".video-popup iframe").attr("src").replace("?autoplay=1",""))})},b=function(){var u=window.location.hash,t=k().VideoID;if(typeof t!="undefined"&&t!==""){t=t.replace(u,"");var i=n("#"+t),r=n(i).find("iframe"),f=n(i).data("youtube-embedded-url"),e=r.data("autoplay");n("#"+t).modal("show");e===1&&n(r).attr("src",f+t+"?autoplay=1")}},it=function(n){o=n},rt=function(n){r=n;r.push(location.host);console.log(r)},ut=function(n){e=n},ft=function(){n('.carousel[data-type="multi"] .item').each(function(){var t=n(this).next(),i;for(t.length||(t=n(this).siblings(":first")),t.children(":first-child").clone().appendTo(n(this)),i=0;i<1;i++)t=t.next(),t.length||(t=n(this).siblings(":first")),t.children(":first-child").clone().appendTo(n(this))})},f=function(t,i){t?(n(i).find(".tel-codes").hide(),n(i).find(".usercontact-textbox").removeClass("col-md-6").addClass("col-md-9")):(n(i).find(".tel-codes").show(),n(i).find(".usercontact-textbox").removeClass("col-md-9").addClass("col-md-6"))},v=function(t,i,r){i.toUpperCase()==="EMAIL"?(n(r).attr("type","email"),f(!0,t)):i.toUpperCase()==="PHONE"?(n(r).attr("type","tel"),f(!1,t)):i.toUpperCase()==="NUMBER"?(n(r).attr("type","number"),f(!0,t)):(n(r).attr("type","text"),f(!0,t))},et=function(t,i){n(".sw-modal").on("shown.bs.modal",function(){var t=n(this).find("form"),r,u;n(i).empty();n(t).validate({messages:{UserContact:{email:"*required",number:"*required"},CountryCode:{required:"*required"}}});r=n('select[name = "UserInfoListItems"] option:first').val();u=n(".sw-modal .usercontact-textbox");v(t,r,u)}).on("hidden.bs.modal",function(){var t=n(this).find("form");n(t).show();n(t)[0].reset()});n(".sw-modal").find('select[name="UserInfoListItems"]').on("change",function(){var t=n(this).val(),i=n(".sw-modal .usercontact-textbox"),r=n(this).closest("form");v(r,t,i)});n("#btnSendSWEmail").on("click",function(r){var u=n(this).closest("form"),f=n(this).closest("form").serializeArray();console.log(f);n(u).valid()&&n.ajax({url:t,type:"POST",data:f,dataType:"json",success:function(t){t.success&&(n(i).html(t.message),n(u).hide())}});r.preventDefault()})},ot=function(t,i){var r=n("#btnSubmitWithWebsiteResponseCode");n(r).off("click");n(r).on("click",function(){var u=n("#"+i).serializeArray();n.post(t,u).done(function(t){if(t.success){var i=document.createElement("a");i.setAttribute("href",n(r).data("url"));i.setAttribute("target","_blank");document.body.appendChild(i);i.click();location.reload(!0)}})})},st=function(){n(".popup-youtube-video").on("show.bs.modal",function(){var t=n(this).attr("id"),i=n(this).data("youtube-embedded-url");console.log(t);n(this).find("iframe").attr("src",i+t)});window.load=b()},ht=function(){n(".subnav-item").closest("li").find("a.dropdown-toggle").on("click",function(){return console.log("click"),n(this).closest("li").find("ul.subnav-item").toggle(),!1})};return{init:w,addWhiteListUrls:rt,addExitInterstitialModalId:ut,addCountrySelect:it,initMultipleItemsCarousel:ft,switchWinEmail:et,downloadCoupon:ot,youTubeVideoPopup:st,multiDropdownHandler:ht}})